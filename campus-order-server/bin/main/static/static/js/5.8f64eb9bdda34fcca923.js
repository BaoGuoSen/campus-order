webpackJsonp([5],{k1Ql:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s("zH3v"),i=s("vMJZ"),a={name:"",components:{mymap:r.a},data:function(){return{mapShow:!1,activeIndex2:"1",isEdit:!1,drawer:!1,user:{id:"",userName:"",type:"",location:""}}},computed:{role:function(){return"1"===this.user.type?"商家":"2"===this.user.type?"骑手":"3"===this.user.type?"顾客":void 0}},mounted:function(){this.user.id=sessionStorage.getItem("userId"),this.user.userName=sessionStorage.getItem("userName"),this.user.type=sessionStorage.getItem("userType"),this.user.location=sessionStorage.getItem("userLocation")},methods:{logout:function(){console.log("logout"),sessionStorage.clear(),this.$router.push({path:"/"})},drawerClose:function(){this.drawer=!1,this.isEdit=!1},drawerInit:function(){this.drawer=!1,this.isEdit=!1},addressControl:function(e,t,s){this.mapShow=!this.mapShow,e&&(this.user.location=e,this.user.lng=t,this.user.lat=s,sessionStorage.setItem("userLocation",e),this.updateUser())},updateUser:function(){var e=this;Object(i.a)(this.user).then(function(t){e.$message({message:"修改成功",type:"success"}),e.isEdit&&(e.isEdit=!e.isEdit),e.drawer=!1}).catch(function(t){e.$message.error(t.status+" "+t.error)})}}},o={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"avater"},[s("el-dropdown",{attrs:{trigger:"click"}},[s("el-avatar",{attrs:{size:35,src:"https://cube.elemecdn.com/0/88/03b0d39583f48206768a7534e55bcpng.png"}}),e._v(" "),s("i",{staticClass:"el-icon-location-information",staticStyle:{"font-size":"25px"},on:{click:function(t){e.mapShow=!0}}}),e._v(" "),s("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[s("el-dropdown-item",{nativeOn:{click:function(t){e.drawer=!0}}},[e._v("个人信息")]),e._v(" "),s("el-dropdown-item",{nativeOn:{click:function(t){return e.logout()}}},[e._v("退出登录")])],1)],1)],1),e._v(" "),s("el-menu",{staticStyle:{"background-image":"linear-gradient(45deg,#409EFF,#67C23A)"},attrs:{"default-active":e.activeIndex2,router:!0,mode:"horizontal","text-color":"#fff","background-color":"#67C23A","active-text-color":"#ffd04b"}},[s("el-menu-item",{attrs:{index:"1"}},[e._v("处理中心")]),e._v(" "),s("el-submenu",{attrs:{index:"2"}},[s("template",{slot:"title"},[e._v("我的工作台")]),e._v(" "),s("el-menu-item",{attrs:{index:"2-1"}},[e._v("选项1")]),e._v(" "),s("el-menu-item",{attrs:{index:"2-2"}},[e._v("选项2")]),e._v(" "),s("el-menu-item",{attrs:{index:"2-3"}},[e._v("选项3")])],2),e._v(" "),s("el-menu-item",{attrs:{index:"3"}},[e._v("消息中心")]),e._v(" "),s("el-menu-item",{attrs:{index:"4"}},[s("a",{attrs:{href:"https://www.ele.me",target:"_blank"}},[e._v("订单管理")])])],1),e._v(" "),s("el-drawer",{ref:"drawer",attrs:{title:"个人信息",visible:e.drawer,direction:"rtl","before-close":e.drawerClose,"custom-class":"demo-drawer"},on:{"update:visible":function(t){e.drawer=t}}},[s("div",[s("el-form",{staticStyle:{margin:"25px"},attrs:{model:e.user,"label-width":"100px"}},[s("el-form-item",{attrs:{label:"用户Id："}},[s("el-input",{attrs:{disabled:""},model:{value:e.user.id,callback:function(t){e.$set(e.user,"id",t)},expression:"user.id"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"用户名："}},[s("el-input",{attrs:{disabled:!1===e.isEdit},model:{value:e.user.userName,callback:function(t){e.$set(e.user,"userName",t)},expression:"user.userName"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"角色："}},[s("el-input",{attrs:{disabled:""},model:{value:e.role,callback:function(t){e.role=t},expression:"role"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"地址信息："}},[s("el-input",{attrs:{disabled:!1===e.isEdit},model:{value:e.user.location,callback:function(t){e.$set(e.user,"location",t)},expression:"user.location"}})],1)],1),e._v(" "),s("div",{staticClass:"demo-drawer__footer"},[s("el-button",{on:{click:e.drawerInit}},[e._v("取 消")]),e._v(" "),e.isEdit?s("el-button",{attrs:{type:"primary"},on:{click:e.updateUser}},[e._v("提交")]):s("el-button",{attrs:{type:"primary"},on:{click:function(t){e.isEdit=!e.isEdit}}},[e._v("修改")])],1)],1)]),e._v(" "),s("keep-alive",[e.mapShow?s("mymap",{staticClass:"map",on:{addressControl:e.addressControl}}):e._e()],1)],1)},staticRenderFns:[]};var n=s("VU/8")(a,o,!1,function(e){s("rxQc")},"data-v-5f71da62",null);t.default=n.exports},rxQc:function(e,t){},vMJZ:function(e,t,s){"use strict";s.d(t,"a",function(){return a});var r=s("mtWM"),i=s.n(r),a=function(e){return i.a.post("api/user/update",e)}}});
//# sourceMappingURL=5.8f64eb9bdda34fcca923.js.map