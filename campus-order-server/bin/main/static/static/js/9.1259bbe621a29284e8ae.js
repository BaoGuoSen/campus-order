webpackJsonp([9],{"I+pv":function(e,t){},YIkU:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=s("zH3v"),r=s("Z8es"),a={components:{mymap:o.a},data:function(){return{store:{id:"",name:"",src:"",location:"",ownerId:"",ownerName:"",income:"",registerTime:"",info:"",lng:"",lat:""},mapShow:!1}},computed:{type:function(){return this.store.id?"edit":"create"}},methods:{addressControl:function(e,t,s){this.mapShow=!1,e&&(this.store.location=e,this.store.lng=t,this.store.lat=s)},goback:function(){this.$router.go(-1)},logout:function(){console.log("logout"),sessionStorage.clear(),this.$router.push({path:"/"})},handleRemove:function(e,t){console.log(e,t)},handlePictureCardPreview:function(e){console.log("preview")},handleAvatarSuccess:function(e,t){this.store.src=e[0]},register:function(){var e=this;this.store.id=r.generate(),this.store.ownerId=sessionStorage.getItem("userId"),this.store.registerTime=(new Date).toLocaleString(),console.log(this.store.registerTime),this.$axios.post("api/store/register",this.store).then(function(t){e.$message({message:"注册成功",type:"success"}),e.$router.push({path:"store/ownDishs"})}).catch(function(t){e.$message.error(t.status+" "+t.error)})},updateStore:function(){var e=this;console.log("111",this.store),this.$axios.post("api/store/updateStore",this.store).then(function(t){e.$message({message:"修改成功",type:"success"}),e.$router.push({path:"store/ownDishs"})}).catch(function(t){e.$message.error(t.status+" "+t.error)})},getStore:function(){var e=this;this.$axios.get("api/store/getStoreById",{params:{ownerId:sessionStorage.getItem("userId")}}).then(function(t){t.data&&(e.store=t.data)}).catch(function(t){e.$message.error(t.status+" "+t.error)})}},mounted:function(){this.getStore(),this.store.ownerName=sessionStorage.getItem("userName")}},i={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"wrapper"},[s("el-button",{staticClass:"logout",attrs:{type:"info"},on:{click:e.logout}},[e._v("退出")]),e._v(" "),s("div",{staticStyle:{"min-height":"800px"}},["create"===e.type?s("div",[s("h1",[e._v("检测到您尚未注册店铺，请完善以下店铺基本信息")])]):e._e(),e._v(" "),s("div",{staticClass:"content"},[s("el-form",{ref:"store",staticStyle:{width:"80%"},attrs:{model:e.store,"label-width":"100px"}},[s("el-form-item",{attrs:{label:"店铺名："}},[s("el-input",{attrs:{placeholder:"storeName"},model:{value:e.store.name,callback:function(t){e.$set(e.store,"name",t)},expression:"store.name"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"注册人："}},[s("el-input",{attrs:{placeholder:"store.owner",disabled:""},model:{value:e.store.ownerName,callback:function(t){e.$set(e.store,"ownerName",t)},expression:"store.ownerName"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"地理信息："}},[s("el-input",{attrs:{placeholder:"接入地图接口，获取位置信息，待办",autocomplete:"off"},model:{value:e.store.location,callback:function(t){e.$set(e.store,"location",t)},expression:"store.location"}}),e._v(" "),s("div",{staticClass:"location-icon"},[s("i",{staticClass:"el-icon-location-information",on:{click:function(t){e.mapShow=!0}}})])],1),e._v(" "),s("el-form-item",{attrs:{label:"注册时间："}},[s("el-input",{attrs:{placeholder:"store.owner",disabled:""},model:{value:e.store.registerTime,callback:function(t){e.$set(e.store,"registerTime",t)},expression:"store.registerTime"}},[e._v(e._s(e.store.registerTime))])],1),e._v(" "),s("el-form-item",{attrs:{label:"总收入："}},[s("el-input",{attrs:{placeholder:"store.owner",disabled:""},model:{value:e.store.income,callback:function(t){e.$set(e.store,"income",t)},expression:"store.income"}},[e._v(e._s(e.store.income))])],1),e._v(" "),s("el-form-item",{attrs:{label:"上传店铺主页图片："}},[e.store.src?s("el-image",{staticStyle:{width:"148px",height:"148px"},attrs:{src:e.store.src,"preview-src-list":[e.store.src]}}):s("el-upload",{attrs:{action:"api/file/upload","list-type":"picture-card","on-preview":e.handlePictureCardPreview,"on-remove":e.handleRemove,"on-success":e.handleAvatarSuccess,limit:1}},[s("i",{staticClass:"el-icon-plus"})])],1),e._v(" "),s("el-form-item",{attrs:{label:"宣传语："}},[s("el-input",{staticClass:"textarea",attrs:{type:"textarea",placeholder:"例：欢迎光临，五折优惠等"},model:{value:e.store.info,callback:function(t){e.$set(e.store,"info",t)},expression:"store.info"}})],1),e._v(" "),s("el-form-item",["create"===e.type?s("el-button",{staticStyle:{width:"380px"},attrs:{type:"primary"},on:{click:e.register}},[e._v("注册")]):s("span",[s("el-button",{staticStyle:{width:"380px"},attrs:{type:"primary"},on:{click:e.goback}},[e._v("返回")]),e._v(" "),s("el-button",{staticStyle:{width:"380px","margin-left":"0px","margin-top":"20px"},attrs:{type:"primary"},on:{click:e.updateStore}},[e._v("修改")])],1)],1)],1)],1)]),e._v(" "),s("keep-alive",[e.mapShow?s("mymap",{staticClass:"map",on:{addressControl:e.addressControl}}):e._e()],1)],1)},staticRenderFns:[]};var n=s("VU/8")(a,i,!1,function(e){s("I+pv")},"data-v-09db2ea0",null);t.default=n.exports}});
//# sourceMappingURL=9.1259bbe621a29284e8ae.js.map