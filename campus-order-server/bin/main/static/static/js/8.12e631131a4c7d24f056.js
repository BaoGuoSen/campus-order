webpackJsonp([8],{WBIc:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={data:function(){return{isEdit:!1,drawer:!1,store:"",user:{id:"",userName:"",type:"",location:""}}},computed:{role:function(){return"1"===this.user.type?"商家":"2"===this.user.type?"骑手":"3"===this.user.type?"顾客":void 0}},mounted:function(){this.user.id=sessionStorage.getItem("userId"),this.user.userName=sessionStorage.getItem("userName"),this.user.type=sessionStorage.getItem("userType"),this.user.location=sessionStorage.getItem("userLocation"),this.getStore()},methods:{drawerClose:function(){this.drawer=!1,this.isEdit=!1},drawerInit:function(){this.drawer=!1,this.isEdit=!1},toStoreInfo:function(){this.$router.push({path:"/storeInfo"})},logout:function(){console.log("logout"),sessionStorage.clear(),this.$router.push({path:"/"})},updateUser:function(){var e=this;this.$axios.post("api/user/update",this.user).then(function(t){e.$message({message:"修改成功",type:"success"}),e.isEdit=!e.isEdit,e.drawer=!1}).catch(function(t){e.$message.error(t.status+" "+t.error)})},getStore:function(){var e=this;this.$axios.get("api/store/getStoreById",{params:{ownerId:sessionStorage.getItem("userId")}}).then(function(t){t.data||e.$router.push({name:"storeInfo",params:{type:"create"}}),e.store=t.data,sessionStorage.getItem("storeId")||sessionStorage.setItem("storeId",t.data.id)}).catch(function(t){e.$message.error(t.status+" "+t.error)})}}},i={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"wrapper1"},[s("div",{staticClass:"header"},[s("div",{staticClass:"avater"},[s("el-dropdown",{attrs:{trigger:"click"}},[s("el-avatar",{attrs:{size:35,src:"https://cube.elemecdn.com/0/88/03b0d39583f48206768a7534e55bcpng.png"}}),e._v(" "),s("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[s("el-dropdown-item",{nativeOn:{click:function(t){e.drawer=!0}}},[e._v("个人信息")]),e._v(" "),s("el-dropdown-item",{nativeOn:{click:function(t){return e.toStoreInfo(t)}}},[e._v("店铺信息")]),e._v(" "),s("el-dropdown-item",{nativeOn:{click:function(t){return e.logout()}}},[e._v("退出登录")])],1)],1)],1)]),e._v(" "),s("div",[s("el-menu",{staticClass:"navigation",attrs:{router:!0,"default-active":"ownDishs","unique-opened":!0,"background-color":"#545c64","text-color":"#fff","active-text-color":"#ffd04b"}},[s("el-menu-item",{attrs:{index:"ownDishs"}},[s("i",{staticClass:"el-icon-s-home"}),e._v(" "),s("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(e.store.name))])]),e._v(" "),s("el-submenu",{attrs:{index:"2"}},[s("template",{slot:"title"},[s("i",{staticClass:"el-icon-tickets"}),e._v(" "),s("span",[e._v("订单管理")])]),e._v(" "),s("el-menu-item-group",[s("el-menu-item",{attrs:{index:"orderList"}},[e._v("所有订单")]),e._v(" "),s("el-menu-item",{attrs:{index:"2-2"}},[e._v("选项2")])],1)],2)],1)],1),e._v(" "),s("el-drawer",{ref:"drawer",attrs:{title:"个人信息",visible:e.drawer,direction:"rtl","before-close":e.drawerClose,"custom-class":"demo-drawer"},on:{"update:visible":function(t){e.drawer=t}}},[s("div",[s("el-form",{staticStyle:{margin:"25px"},attrs:{model:e.user,"label-width":"100px"}},[s("el-form-item",{attrs:{label:"用户Id："}},[s("el-input",{attrs:{disabled:""},model:{value:e.user.id,callback:function(t){e.$set(e.user,"id",t)},expression:"user.id"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"用户名："}},[s("el-input",{attrs:{disabled:!1===e.isEdit},model:{value:e.user.userName,callback:function(t){e.$set(e.user,"userName",t)},expression:"user.userName"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"角色："}},[s("el-input",{attrs:{disabled:""},model:{value:e.role,callback:function(t){e.role=t},expression:"role"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"地址信息："}},[s("el-input",{attrs:{disabled:!1===e.isEdit},model:{value:e.user.location,callback:function(t){e.$set(e.user,"location",t)},expression:"user.location"}})],1)],1),e._v(" "),s("div",{staticClass:"demo-drawer__footer"},[s("el-button",{on:{click:e.drawerInit}},[e._v("取 消")]),e._v(" "),e.isEdit?s("el-button",{attrs:{type:"primary"},on:{click:e.updateUser}},[e._v("提交")]):s("el-button",{attrs:{type:"primary"},on:{click:function(t){e.isEdit=!e.isEdit}}},[e._v("修改")])],1)],1)]),e._v(" "),s("div",{staticClass:"content"},[s("router-view")],1)],1)},staticRenderFns:[]};var o=s("VU/8")(r,i,!1,function(e){s("qknY")},"data-v-27e7f0f0",null);t.default=o.exports},qknY:function(e,t){}});
//# sourceMappingURL=8.12e631131a4c7d24f056.js.map