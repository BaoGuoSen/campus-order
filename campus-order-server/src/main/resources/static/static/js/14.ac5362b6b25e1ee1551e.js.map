{"version":3,"sources":["webpack:///src/components/login.vue","webpack:///./src/components/login.vue?6b06","webpack:///./src/components/login.vue"],"names":["login","data","user","userNme","password","methods","_this","this","userName","$message","error","$axios","post","then","res","console","log","sessionStorage","setItem","id","userType","location","lng","lat","getStore","catch","e","status","ownerId","_this2","get","params","$router","push","name","type","store","path","query","mounted","components_login","render","_vm","_h","$createElement","_c","_self","_v","ref","staticStyle","width","attrs","model","placeholder","autocomplete","value","callback","$$v","$set","expression","nativeOn","keydown","$event","indexOf","_k","keyCode","key","on","click","staticClass","href","staticRenderFns","Component","__webpack_require__","normalizeComponent","__webpack_exports__"],"mappings":"sGAqBA,IAAAA,GACAC,KADA,WAEA,OACAC,MACAC,QAAA,GACAC,SAAA,MAIAC,SACAL,MADA,WACA,IAAAM,EAAAC,KACA,KAAAA,KAAAL,KAAAM,UAAA,KAAAD,KAAAL,KAAAE,SACAG,KAAAE,SAAAC,MAAA,cAEAH,KAAAI,OACAC,KAAA,iBAAAL,KAAAL,MACAW,KAAA,SAAAC,GACA,QAAAA,EAAAb,KAAA,CACAc,QAAAC,IAAA,QAIAC,eAAAC,QAAA,SAAAJ,EAAAb,KAAAkB,IACAF,eAAAC,QAAA,WAAAJ,EAAAb,KAAAmB,UACAH,eAAAC,QAAA,WAAAJ,EAAAb,KAAAO,UACAS,eAAAC,QAAA,eAAAJ,EAAAb,KAAAoB,UACAJ,eAAAC,QAAA,MAAAJ,EAAAb,KAAAqB,KACAL,eAAAC,QAAA,MAAAJ,EAAAb,KAAAsB,KACA,IAAAH,EAAAN,EAAAb,KAAAmB,SACAd,EAAAkB,SAAAV,EAAAb,KAAAkB,GAAAC,QAEAd,EAAAG,SAAAC,MAAA,oBAGAe,MAAA,SAAAC,GACApB,EAAAG,SAAAC,MAAAgB,EAAAC,OAAA,IAAAD,EAAAhB,UAIAc,SA9BA,SA8BAI,EAAAR,GAAA,IAAAS,EAAAtB,KACAA,KAAAI,OACAmB,IAAA,0BACAC,QACAH,aAGAf,KAAA,SAAAC,GACA,IAAAM,GAAAN,EAAAb,MACA4B,EAAAG,QAAAC,MACAC,KAAA,YACAH,QACAI,KAAA,YAIAN,EAAAO,MAAAtB,EAAAb,KACAgB,eAAAC,QAAA,UAAAJ,EAAAb,KAAAkB,IACA,IAAAC,EACAS,EAAAG,QAAAC,MACAI,KAAA,kBACAC,WAEA,IAAAlB,EACAS,EAAAG,QAAAC,MACAI,KAAA,SACAC,WAGAT,EAAAG,QAAAC,MACAI,KAAA,qBACAC,aAIAb,MAAA,SAAAC,GACAG,EAAApB,SAAAC,MAAAgB,EAAAC,OAAA,IAAAD,EAAAhB,WAIA6B,QA/EA,cClBeC,GADEC,OAFjB,WAA0B,IAAAC,EAAAnC,KAAaoC,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAAA,EAAA,MAAAH,EAAAK,GAAA,kBAAAL,EAAAK,GAAA,KAAAF,EAAA,MAAAH,EAAAK,GAAA,QAAAL,EAAAK,GAAA,KAAAF,EAAA,WAAiHG,IAAA,OAAAC,aAAwBC,MAAA,SAAgBC,OAAQC,MAAAV,EAAAxC,QAAkB2C,EAAA,gBAAAA,EAAA,YAAoCM,OAAOE,YAAA,WAAAC,aAAA,MAA6CF,OAAQG,MAAAb,EAAAxC,KAAA,SAAAsD,SAAA,SAAAC,GAAmDf,EAAAgB,KAAAhB,EAAAxC,KAAA,WAAAuD,IAAoCE,WAAA,oBAA6B,GAAAjB,EAAAK,GAAA,KAAAF,EAAA,gBAAAA,EAAA,YAAoDM,OAAOE,YAAA,WAAAlB,KAAA,YAA2CyB,UAAWC,QAAA,SAAAC,GAA2B,OAAAA,EAAA3B,KAAA4B,QAAA,QAAArB,EAAAsB,GAAAF,EAAAG,QAAA,WAAAH,EAAAI,IAAA,SAAsF,KAAexB,EAAA1C,MAAA8D,KAA0BV,OAAQG,MAAAb,EAAAxC,KAAA,SAAAsD,SAAA,SAAAC,GAAmDf,EAAAgB,KAAAhB,EAAAxC,KAAA,WAAAuD,IAAoCE,WAAA,oBAA6B,GAAAjB,EAAAK,GAAA,KAAAF,EAAA,gBAAAA,EAAA,aAAqDI,aAAaC,MAAA,SAAgBC,OAAQhB,KAAA,WAAiBgC,IAAKC,MAAA1B,EAAA1C,SAAmB0C,EAAAK,GAAA,YAAAL,EAAAK,GAAA,KAAAF,EAAA,gBAAAA,EAAA,KAA4DwB,YAAA,QAAAlB,OAA2BmB,KAAA,6BAAkC5B,EAAAK,GAAA,qBAEllCwB,oBCYjBC,EAdyBC,EAAQ,OAcjCC,CACE1E,EACAwC,GATF,EAEA,KAEA,KAEA,MAUemC,EAAA,QAAAH,EAAiB","file":"static/js/14.ac5362b6b25e1ee1551e.js","sourcesContent":["<template>\r\n  <div>\r\n    <h1>Campus-Order</h1>\r\n    <h2>登录</h2>\r\n    <el-form ref=\"user\" :model=\"user\" style=\"width:300px\">\r\n      <el-form-item>\r\n        <el-input v-model=\"user.userName\"  placeholder=\"userName\" autocomplete=\"on\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item>\r\n        <el-input v-model=\"user.password\"  placeholder=\"password\" @keydown.enter.native=\"login\" type=\"password\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item>\r\n        <el-button type=\"primary\" @click=\"login\"  style=\"width:300px;\">登录</el-button>\r\n      </el-form-item>\r\n      <el-form-item>\r\n        <a class=\"logon\" href=\"/#/index/chooseUserType\">立即注册</a>\r\n      </el-form-item>\r\n    </el-form>\r\n  </div>\r\n</template>\r\n<script>\r\nexport default {\r\n  data () {\r\n    return {\r\n      user: {\r\n        userNme: '',\r\n        password: ''\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    login () {\r\n      if (this.user.userName === '' || this.user.password === '') {\r\n        this.$message.error('请输入用户名或者密码')\r\n      } else {\r\n        this.$axios\r\n          .post('api/user/login', this.user)\r\n          .then(res => {\r\n            if (res.data !== '') {\r\n              console.log('登录成功')\r\n              // document.cookie = 'userId = ' + res.data.id\r\n              // document.cookie = 'userType = ' + res.data.userType\r\n              // console.log(document.cookie)\r\n              sessionStorage.setItem('userId', res.data.id)\r\n              sessionStorage.setItem('userType', res.data.userType)\r\n              sessionStorage.setItem('userName', res.data.userName)\r\n              sessionStorage.setItem('userLocation', res.data.location)\r\n              sessionStorage.setItem('lng', res.data.lng)\r\n              sessionStorage.setItem('lat', res.data.lat)\r\n              let userType = res.data.userType\r\n              this.getStore(res.data.id, userType)\r\n            } else {\r\n              this.$message.error('用户名或密码错误，请重新输入')\r\n            }\r\n          })\r\n          .catch(e => {\r\n            this.$message.error(e.status + ' ' + e.error)\r\n          })\r\n      }\r\n    },\r\n    getStore (ownerId, userType) {\r\n      this.$axios\r\n        .get('api/store/getStoreById', {\r\n          params: {\r\n            ownerId: ownerId\r\n          }\r\n        })\r\n        .then(res => {\r\n          if (userType === 1 && !res.data) {\r\n            this.$router.push({\r\n              name: 'storeInfo',\r\n              params: {\r\n                type: 'create'\r\n              }\r\n            })\r\n          }\r\n          this.store = res.data\r\n          sessionStorage.setItem('storeId', res.data.id)\r\n          if (userType === 1) {\r\n            this.$router.push({\r\n              path: '/store/ownDishs',\r\n              query: {}\r\n            })\r\n          } else if (userType === 2) {\r\n            this.$router.push({\r\n              path: '/rider',\r\n              query: {}\r\n            })\r\n          } else {\r\n            this.$router.push({\r\n              path: '/customer/allDishs',\r\n              query: {}\r\n            })\r\n          }\r\n        })\r\n        .catch(e => {\r\n          this.$message.error(e.status + ' ' + e.error)\r\n        })\r\n    }\r\n  },\r\n  mounted () {\r\n    // if (sessionStorage.getItem('userId')) {\r\n    //   let userType = sessionStorage.getItem('userType')\r\n    //   console.log(typeof userType)\r\n    //   if (userType === '1') {\r\n    //     this.$router.push({\r\n    //       path: '/store/ownDishs',\r\n    //       query: {}\r\n    //     })\r\n    //   } else if (userType === '2') {\r\n\r\n    //   } else {\r\n    //     this.$router.push({\r\n    //       path: '/customer/allDishs',\r\n    //       query: {}\r\n    //     })\r\n    //   }\r\n    // }\r\n  }\r\n}\r\n</script>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/login.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('h1',[_vm._v(\"Campus-Order\")]),_vm._v(\" \"),_c('h2',[_vm._v(\"登录\")]),_vm._v(\" \"),_c('el-form',{ref:\"user\",staticStyle:{\"width\":\"300px\"},attrs:{\"model\":_vm.user}},[_c('el-form-item',[_c('el-input',{attrs:{\"placeholder\":\"userName\",\"autocomplete\":\"on\"},model:{value:(_vm.user.userName),callback:function ($$v) {_vm.$set(_vm.user, \"userName\", $$v)},expression:\"user.userName\"}})],1),_vm._v(\" \"),_c('el-form-item',[_c('el-input',{attrs:{\"placeholder\":\"password\",\"type\":\"password\"},nativeOn:{\"keydown\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.login($event)}},model:{value:(_vm.user.password),callback:function ($$v) {_vm.$set(_vm.user, \"password\", $$v)},expression:\"user.password\"}})],1),_vm._v(\" \"),_c('el-form-item',[_c('el-button',{staticStyle:{\"width\":\"300px\"},attrs:{\"type\":\"primary\"},on:{\"click\":_vm.login}},[_vm._v(\"登录\")])],1),_vm._v(\" \"),_c('el-form-item',[_c('a',{staticClass:\"logon\",attrs:{\"href\":\"/#/index/chooseUserType\"}},[_vm._v(\"立即注册\")])])],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-4ad48b81\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/login.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./login.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./login.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-4ad48b81\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./login.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/login.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}