webpackJsonp([14],{K31e:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={data:function(){return{user:{userNme:"",password:""}}},methods:{login:function(){var e=this;""===this.user.userName||""===this.user.password?this.$message.error("请输入用户名或者密码"):this.$axios.post("api/user/login",this.user).then(function(t){if(""!==t.data){console.log("登录成功"),sessionStorage.setItem("userId",t.data.id),sessionStorage.setItem("userType",t.data.userType),sessionStorage.setItem("userName",t.data.userName),sessionStorage.setItem("userLocation",t.data.location),sessionStorage.setItem("lng",t.data.lng),sessionStorage.setItem("lat",t.data.lat);var s=t.data.userType;e.getStore(t.data.id,s)}else e.$message.error("用户名或密码错误，请重新输入")}).catch(function(t){e.$message.error(t.status+" "+t.error)})},getStore:function(e,t){var s=this;this.$axios.get("api/store/getStoreById",{params:{ownerId:e}}).then(function(e){1!==t||e.data||s.$router.push({name:"storeInfo",params:{type:"create"}}),s.store=e.data,sessionStorage.setItem("storeId",e.data.id),1===t?s.$router.push({path:"/store/ownDishs",query:{}}):2===t?s.$router.push({path:"/rider",query:{}}):s.$router.push({path:"/customer/allDishs",query:{}})}).catch(function(e){s.$message.error(e.status+" "+e.error)})}},mounted:function(){}},a={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("h1",[e._v("Campus-Order")]),e._v(" "),s("h2",[e._v("登录")]),e._v(" "),s("el-form",{ref:"user",staticStyle:{width:"300px"},attrs:{model:e.user}},[s("el-form-item",[s("el-input",{attrs:{placeholder:"userName",autocomplete:"on"},model:{value:e.user.userName,callback:function(t){e.$set(e.user,"userName",t)},expression:"user.userName"}})],1),e._v(" "),s("el-form-item",[s("el-input",{attrs:{placeholder:"password",type:"password"},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.login(t)}},model:{value:e.user.password,callback:function(t){e.$set(e.user,"password",t)},expression:"user.password"}})],1),e._v(" "),s("el-form-item",[s("el-button",{staticStyle:{width:"300px"},attrs:{type:"primary"},on:{click:e.login}},[e._v("登录")])],1),e._v(" "),s("el-form-item",[s("a",{staticClass:"logon",attrs:{href:"/#/index/chooseUserType"}},[e._v("立即注册")])])],1)],1)},staticRenderFns:[]},o=s("VU/8")(r,a,!1,null,null,null);t.default=o.exports}});
//# sourceMappingURL=14.ac5362b6b25e1ee1551e.js.map